import{j as r,p as i,f as g,L as p,S as h}from"./index-DFMLopnp.js";const u="_products__list_3oq3q_1",c={products__list:u},x="_error_1n586_1",j="_error__content_1n586_8",k="_error__message_1n586_14",N="_error__refetch_1n586_20",t={error:x,error__content:j,error__message:k,error__refetch:N},d=({message:s,onRefetch:e})=>r.jsx("div",{className:t.error,children:r.jsxs("div",{className:t.error__content,children:[r.jsx("p",{className:t.error__message,children:s}),e&&r.jsx("button",{className:t.error__refetch,onClick:e,children:"Повторить запрос"})]})}),f="_card_nigaa_1",v="_card__content_nigaa_13",w="_card__img_nigaa_16",y="_card__wrapper_nigaa_29",L="_card__price_nigaa_34",C="_card__title_nigaa_52",I="_card__link_nigaa_70",E="_marks_nigaa_94",M="_marks__item_nigaa_103",_={card:f,card__content:v,"card__img-wrapper":"_card__img-wrapper_nigaa_16",card__img:w,card__wrapper:y,card__price:L,card__title:C,card__link:I,marks:E,marks__item:M},P=({marks:s})=>s.length===0?null:r.jsx("div",{className:_.marks,children:s.map((e,n)=>r.jsx("div",{className:_.marks__item,style:{backgroundColor:e.color_code},children:e.Mark_Name},n))}),b=({productData:s})=>{const e=s.images.find(a=>a.MainImage===!0)?.Image_URL??i,n=a=>{a.currentTarget.src!==i&&(a.currentTarget.src=i)};return r.jsxs("article",{className:_.card,children:[r.jsxs("div",{className:_.card__content,children:[r.jsx("div",{className:_["card__img-wrapper"],children:r.jsx("img",{src:e,alt:s.name,className:_.card__img,loading:"lazy",onError:n})}),r.jsxs("div",{className:_.card__wrapper,children:[r.jsx("strong",{className:_.card__price,children:g(s.price)}),r.jsx("h3",{className:_.card__title,children:s.name})]})]}),r.jsx(p,{to:`/:${s.id}`,className:_.card__link,children:"Подробнее"}),r.jsx(P,{marks:s.marks})]})},R=()=>r.jsx("section",{className:c.products,children:r.jsx("div",{className:c.products__list,children:Array.from({length:6},(s,e)=>r.jsx(h,{height:274,containerClassName:c.products__skeleton},e))})}),$=({dataQuery:s})=>{const{data:e,isLoading:n,isError:a,refetch:l}=s;if(n)return r.jsx(R,{});if(a)return r.jsx(d,{message:"Не удалось получить список :(",onRefetch:l});if(!e?.products)return r.jsx(d,{message:"Список пуст"});const m=e?.products;return r.jsx("section",{className:c.products,children:r.jsx("ul",{className:c.products__list,children:m.map(o=>r.jsx("li",{className:c.product__item,children:r.jsx(b,{productData:o})},o.id))})})};export{$ as default};
